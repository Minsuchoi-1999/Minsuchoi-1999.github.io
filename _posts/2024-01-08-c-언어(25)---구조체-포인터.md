---
date: 2024-01-08 06:35:08
layout: post
title: "C 언어(25) - 구조체 포인터"
subtitle: "C 언어 강의, 구조체 포인터와 -> 이해"
description: 구조체 포인터와 -> 연산자를 이해한다.
image: https://res.cloudinary.com/dtloik0ts/image/upload/t_transformation/v1703569833/programming-careers-s_lvchit.jpg
optimized_image: https://res.cloudinary.com/dtloik0ts/image/upload/t_opt/v1703569833/programming-careers-s_lvchit.jpg
category: C
tags:
  - C
  - 정리
author: Minsu Choi
paginate: false
---

<h2>🔚 짧게 하는 복습</h2>

✅ 1. 구조체의 정의, 선언을 할 수 있다.

✅ 2. 구조체의 메모리상 저장 방법과 패딩 최적화를 안다.

✅ 3. 구조체 원소의 간접 참조, 직접 참조

혹시 기억이 안 난다면, <u><a href = "/c-언어(24)-구조체/"> 다시 돌아가자</a></u>

---

저번에는 구조체에 대해서 정의, 선언, 수정에 걸쳐 메모리 구조까지 파악하는 시간을 가졌다.

구조체야말로 C언어 기본 강의에서 배우는 자료구조의 꽃이다.

이는 앞으로 배울 객체 지향 프로그래밍이라는 것으로도 넘어가기 때문에, 구조체를 잘 숙지하는 것이 좋다.

일단, 구조체의 큰 특징 중 하나인 패딩은 꼭 잘 알아두는 것이 좋다.

또한, 아직은 참조 연산자인 **.**은 잘 사용하는 것이 불편할텐데 익숙해지는 것이 좋다.

오늘은 구조체에서 다루는 마지막 특징인 구조체 포인터를 알아보겠다.

---

## 구조체 포인터란?

저번에 배열 포인터, 포인터 배열 등을 다룰 때 뒤에 오는 것이 근본이라는 것을 배웠다.

구조체 포인터, 역시 구조체가 메인이 아니라 포인터가 메인이다.

포인터는 포인터인데 구조체를 가리키는 포인터이다.

구조체 포인터는 다른 포인터들처럼 선언 및 초기화를 할 수 있고, 특히 저번 시간에 배운 것처럼 주소연산자를 통해 초기화할 수 있다.

아래 코드를 주의 깊게 보자.

```c
#include <stdio.h>

struct score {
	int math;
	int english;
	int korean;
};// 점수를 저장하는 구조체

struct student {
	char* name;
	int age;
	struct score stu_score;
};// 구조체 안에 문자열 뿐만 아니라 구조체를 넣을 수 있다.

typedef struct student stu;// typedef로 쉽게 선언할 수 있다.

int main(void) {
	stu minsu = { "Minsu", 23, {99, 98, 100} };

	stu* p_minsu = &minsu;

	//printf("%s %d %d %d %d", *(p_minsu).name, *(p_minsu).age, *(p_minsu).stu_score.math, *(p_minsu).stu_score.english, *(p_minsu).stu_score.korean);
	//이렇게 하면 될 것 같지만, 안됨

	printf("%s %d %d %d %d", p_minsu->name, p_minsu->age, p_minsu->stu_score.math, p_minsu->stu_score.english, p_minsu->stu_score.korean);
  //새로운 연산자의 등장

	return 0;
}
```

분명 이론상, 포인터가 구조체를 가리키고 있으니 간접 참조 후 .연산자를 통해서 하면 될 것 같다.

사실 전자의 코드도 논리상 큰 문제가 없다. 저번 강의에도 나왔지만 .연산자의 경우 **주소 연산** 및 **직접 참조**가 동시에 되기 때문이다.

하지만 코드가 복잡해지는 것을 막기위해 구조체 포인터를 통해 값을 **간접 참조**하고 싶을 때는, **->** 연산자를 이용한다.

이를 통해서, 아래와 같은 코드도 가능하다.

```c
p_minsu->age = 30;
p_minsu->stu_score.math = 80;
p_minsu->stu_score.english = 80;
p_minsu->stu_score.korean = 80;
//간접 참조를 통한 구조체 값 변경.
```

---

## 구조체 배열 및 구조체 포인터 배열

여기서 마치긴 아쉬우니, 특별한 자료구조를 더 배워보자.

우선은 **구조체 배열**과 **구조체 포인터 배열**이다.

이제는 익숙할 것이다. 전자는 **구조체를 원소**로 가지는 배열, 후자는 **구조체 포인터를 원소**로 가지는 배열이다.

이런게 왜 필요하나 싶은데, 사실 우리가 컴퓨터를 사용할 때마다 사용하는 _운영체제_, _네트워크_ 모두 이러한 자료구조들로 만들어져있다.

구조체 배열부터 예제를 통해서 한 번 보자.
